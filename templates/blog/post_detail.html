{% extends "base/diary_base.html" %}
{% load youtube_extras %}
{% load comment_tags %}
{% load static %}

{% block body %}
<link rel="stylesheet" href="{% static 'blog/css/blog.css' %}">

<div class="content-container">

    <!-- æŠ•ç¨¿ã‚«ãƒ¼ãƒ‰ -->
    <div class="post-detail-card">

        <div class="post-meta">
            <small>ğŸ•’ {{ post.posted_date }}</small><br>
            <small>âœï¸ {{ post.name }}</small>
        </div>

        <h1 class="post-title">{{ post.title }}</h1>

        <div class="post-body">
            {{ post.body|linebreaks }}
        </div>

        <div class="media-wrapper">
            {% if post.image %}
            <img src="{{ post.image.url }}" class="comment-media-thumb">
            {% endif %}

            {% include "blog/video_embed.html" with video_url=post.video_url %}
        </div>
    </div>

    <!-- ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿ -->
    <div class="comment-form-card">
        <h2 class="section-title">ğŸ’¬ ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ›¸ã</h2>

        <form method="post" action="{% url 'blog:post_detail' slug=post.slug %}">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="submit-btn">
                ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿
            </button>
        </form>
    </div>

    <!-- ã‚³ãƒ¡ãƒ³ãƒˆä¸€è¦§ -->
    <div class="comment-list-card">
        <h2 class="section-title">ğŸ—‚ ã‚³ãƒ¡ãƒ³ãƒˆä¸€è¦§</h2>

        {% include "blog/child_comments.html" with comments=parent_comments form=form %}
    </div>

    <!-- æˆ»ã‚‹ -->
    <div class="back-area">
        <a href="{{ request.META.HTTP_REFERER|default:'/' }}" class="back-button">
            â† æˆ»ã‚‹
        </a>
    </div>

</div>

<!-- ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div id="media-modal" class="media-modal" onclick="closeMedia()">
    <div id="media-content"></div>
</div>

<script src="{% static 'blog/js/blog.js' %}"></script>
<script async src="https://www.tiktok.com/embed.js"></script>
<script async src="//www.instagram.com/embed.js"></script>
<script async src="https://platform.twitter.com/widgets.js"></script>

{% endblock %}