{% extends "base/diary_base.html" %}
{% load youtube_extras %}
{% load static %}

{% block body %}
<link rel="stylesheet" href="{% static 'blog/css/blog.css' %}">


<h2>å£ã‚’é–‹ã</h2>
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">å£ã‚’ã¨ã˜ã‚‹</button>
    <br>
    <div class="notification is-light">
        <strong>ğŸ“º YouTubeå‹•ç”»ã®è²¼ã‚Šæ–¹</strong><br>
        â‘  YouTubeã§å‹•ç”»ã‚’é–‹ã<br>
        â‘¡ ã€Œå…±æœ‰ã€ã‚’æŠ¼ã™<br>
        â‘¢ è¡¨ç¤ºã•ã‚ŒãŸURLã‚’ã‚³ãƒ”ãƒ¼<br>
        â‘£ ãã®ã¾ã¾è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ï¼ˆé™å®šå…¬é–‹ã§ã‚‚OKï¼‰
    </div>
    <br>
</form>

{% for post in posts %}

<a href="{% url 'blog:post_detail' slug=post.slug %}">{{ post.title }}</a>

<div class="post block">
    <!-- æŠ•ç¨¿è€…å -->
    <p><strong>æŠ•ç¨¿è€…: </strong>{{ post.name }}</p>

    <h2 class="subtitle">{{ post.title }}</h2>
    <small>Posted at {{ post.posted_date }}</small>

<p>{{ post.body|truncatechars:120 }}</p>

    <!-- ğŸ”½ ç”»åƒã‚µãƒ ãƒ -->
    {% if post.image and post.image.name %}
    <img src="{{ post.image.url }}" class="comment-media-thumb">
    {% endif %}

    <!-- ğŸ”½ å‹•ç”»ã‚µãƒ ãƒ -->
    {% if post.youtube_url %}
    <div class="video-wrapper">
        <iframe src="https://www.youtube.com/embed/{{ post.youtube_url|youtube_id }}" frameborder="0" allowfullscreen
            loading="lazy">
        </iframe>
    
        <p class="youtube-link">
            â–¶ å†ç”Ÿã§ããªã„å ´åˆã¯
            <a href="{{ post.youtube_url }}" target="_blank" rel="noopener">
                YouTubeã§è¦‹ã‚‹
            </a>
        </p>
    </div>
    {% endif %}

    <br>
    <a href="{% url 'blog:post_detail' slug=post.slug %}">ã‚‚ã£ã¨èª­ã‚€</a>
</div>

{% endfor %}

<!-- ğŸ”½ ãƒ¡ãƒ‡ã‚£ã‚¢è¡¨ç¤ºç”¨ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆå¿…é ˆï¼‰ -->
<div id="media-modal" class="media-modal" onclick="closeMedia()">
    <div id="media-content"></div>
</div>

<script src="{% static 'blog/js/blog.js' %}"></script>

{% endblock %}